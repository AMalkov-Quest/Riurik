<!doctype html>
<html>
	<head>
		<title></title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<script type="text/javascript">
			/* Top level namespace for Riurik */
			var riurik = {};

			riurik.src = {};
			riurik.src.jquery = '/static/js/jquery.min.js';
			riurik.src.bootstrap = '/static/js/bootstrap.js';

			riurik.TryGetArgument = function( name ) {
				var arg = (new RegExp( name + '=([^&$]+)' )).exec(window.location.href);
				if ( arg ) return arg[1];
				return null;
			};

			riurik.GetArgument = function( name ) {
				var arg = riurik.TryGetArgument(name);
				if ( arg ) return arg;
				else alert('Can not find argument ' + name);
			};

			riurik.BuildHttpUri = function(url) {
				return 'http://'.concat(riurik.args.server, url);
			};

			riurik.GetCwd = function(path) {
				if ( ! /\.js$/.test(path) ) {
					//current target is suite, just return it
					return path;
				}
				//current target is test, return it's folder
				return /(.*?)\/[^\/]*$/.exec(path)[1];
			};
			
			riurik.args = {};
			riurik.args.server = riurik.GetArgument('server');
			riurik.args.path = riurik.GetArgument('path');
			riurik.args.cwd = riurik.GetCwd(riurik.args.path);

			window.onload = function(){
				var url = riurik.BuildHttpUri( riurik.src.bootstrap );
				var script = document.createElement( 'script' );
				script.type = 'text/javascript';
				script.src = url + '?_=' + Math.random().toString();
				document.body.appendChild( script );
			};
		</script>
	</head>
	<body>
		<div id="gif-loader" style="position:absolute; top:50%; left:50%;">
			<img src="http://www.riurik.com/static/img/ajax-loader.gif">
		</div>
		<div id="engine">
		</div>
		<div id="frame-container" style="display:none;">
			<div id="frame-url"></div>
			<iframe id="frame" name="frame">
				<html>
					<head>
					</head>
					<body>
					</body>
				</html>
			</iframe>
		</div>
	</body>
</html>
