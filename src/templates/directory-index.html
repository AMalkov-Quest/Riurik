<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
{% load i18n %}
{% load dir_index_tags %}

<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Language" content="en-us" />
	<meta http-equiv="Cache-Control" content="No-Cache" />
    <meta name="robots" content="NONE,NOARCHIVE" />
	<script type="text/javascript">
		// Define a cross-browser window.console.log method.
		// For IE and FF without Firebug, fallback to using an alert.
		if (!window.console) {
			window.console = { log: function() {  } };
		}
        if (!window.riurik) {
            window.riurik = {};
            riurik.on = function(){ $(riurik).on.apply( $( riurik ), $.makeArray(arguments) ); };
            riurik.trigger = function(event){ $(riurik).trigger.apply( $(riurik), [event, $.makeArray(arguments).slice(1)] );};

        }
	</script>
    <link rel="shortcut icon" href="/static/img/{{ favicon }}">
	{% block head %}
        <script type="text/javascript" src="/static/js/jquery.min.js"></script>
	    <script type="text/javascript">
        $(function(){
			riurik.trigger('riurik.initing-editor');
			$('select#context').customSelect();
		});
	    </script>
      	<script type="text/javascript" src="/static/js/jquery.json.min.js"></script>
		<script type="text/javascript" src="/static/jquery-ui/js/jquery-ui.custom.min.js"></script>
	    <script type="text/javascript" src="/static/js/consoles.js"></script>
    
		 {% block styles %}
		<link rel="stylesheet" href="/static/css/base.css" type="text/css">
    	<link rel="stylesheet" type="text/css" href="/static/jquery-ui/css/start/jquery-ui.custom.css" />
		<link rel="stylesheet" href="/static/css/loader.css" type="text/css">
	    <link rel="stylesheet" href="/static/css/contextMenu.css" type="text/css">
		<link rel="stylesheet" href="/static/css/select.css" type="text/css">
		{% endblock styles %}

        <script type="text/javascript" src="/static/js/jquery.contextMenu.js"></script>
	    <script type="text/javascript" src="/static/js/dir-index-ctxmenu.js"></script>
	    <script type="text/javascript" src="/static/js/dir-index-tools.js"></script>
		<script type="text/javascript" src="/static/js/select.js"></script>
		{% block javascripts %}
		{% endblock javascripts %}
    {% endblock head %}
	    
    <title>{{ directory|current }}</title>
</head>

{% include "dir-index-tools.html" %}
{% include "dir-index-menu.html" %}

<body>
	{% block body %}
	<div class="header">
		<div title="Riurik" class="title-riurik">Riurik</div>
		{% block search %}{% include 'search/include/search.html' %}{% endblock search %}
		{% block user %}{% include 'github-user.html' %}{% endblock user %}
	</div>
	<div class="content">
		{% block title %}
		<div id="breadcrumbs" class="breadcrumbs {{ type }}">{{ directory|breadcrumbs:type }}</div>
		{% endblock title %}
		<!--<div id="syntax" style="float:left;padding:15px 0 0 20px;"></div>-->
		<div id="horizontal-menu">
			{% block controls %}
			<form id="run-suite" method="POST" action="/actions/suite/submit/" target="{{ directory }}">
			<input type="hidden" name="path" value="{{ directory }}">
			<input type="hidden" name="url" value="{{ directory }}">
			<ul class="horizontal-menu">
				{% if type != 'front-page' %}
					{% ifequal type 'suite' %}
						{% if contexts %}
						<li>
							<a id="run-suite-btn" href="javascript:void(0);">Run Suite</a>
							<select id="context" name="context">
								{% for item in contexts %}
									<option value="{{ item }}">{{ item }}</option>
								{% endfor %}
							</select>
							<a id="history" href="javascript: alert('Select context');">History</a>
						</li>
						{% endif %}
						<li><a id="context-preview-ctrl" href=".context.ini" rel='context-preview'>{% trans "Context" %}</a></li>
						<li><a id="spec-link" href="{{ spec }}" target="_blank" >{% trans "Spec" %}</a></li>
						<li><a id="new-test" href="javascript:void(0);" onClick="javascript:createTest();">{% trans "Create Test" %}</a></li>
					{% else %}
						{% ifequal type 'root' %}
						<li><a id="virtual-settings" href=".settings.ini?editor">{% trans "Settings" %}</a></li>
						{% endifequal %}
						<li><a id="new-suite" href="javascript:void(0);" onClick="javascript:createFolder();">{% trans "Create Suite" %}</a></li>
						{% ifnotequal type 'root' %}
						<li><a id="new-test" href="javascript:void(0);" onClick="javascript:createTest();">{% trans "Create Script" %}</a></li>
						{% endifnotequal %}
					{% endifequal %}
				{% else %}
					{% if githref %}
					<li>
					<a id="github" href="javascript:void(0)" class="github" >{% trans "Log in with github" %}</a>
					</li>
					{% else %}
					<li><a id="configure" href="/settings" >{% trans "Configure" %}</a></li>
					{% endif %}
					
				{% endif %}
			</ul>
			</form>
			{% endblock controls %}
		</div>
		<div style="clear:both;"></div>
		{% block content %}
		<div id="dir-index-id" class="dir-index">
			<br>
			<ul>
				{% for f in dir_list %}
				<li id="{{ f.title|strip:'/' }}" class="{{ f.type }}" title="{{ f.title|strip:'/' }}">
					<a href="{{ f.title }}">{{ f.title|strip:'/' }}</a>
				</li>
				{% endfor %}

				{% for f in file_list %}
				<li class="{{ f.type }}" title="{{ f.title|strip:'/' }}">
					<a id="{{ f.title|strip:'/' }}" href="{{ f.title }}?editor">{{ f.title|strip:'/' }}</a>
				</li>
				{% endfor %}
			</ul>
		</div>
		{% endblock %}
    </div>
    {% endblock %}
</body>
</html>
